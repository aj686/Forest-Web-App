{% extends 'base.html' %}
{% block title %} Stand Table 30 {% endblock %}
{% block header %} Stand Table 30 {% endblock %}
{% block body %}
<div class="container mt-5">
    <!-- Table for StandTable30 Data -->
    <div id="standtable" class="table-responsive">
        <table class="table table-bordered table-striped">
            <!-- Table header -->
            <thead class="bg-dark text-light">
                <tr>
                    <th>Species Group</th>
                    <th>Total Volume (mÂ³)</th>
                    <th>Total Production</th>
                    <th>Total Damage Stem</th>
                    <th>Total Diameter after 30 years</th>
                    <th>Total Production after 30 years</th>
                </tr>
            </thead>
            <!-- Table body -->
            <tbody>
                {% for stand in stand_data_30 %}
                <tr>
                    <td>{{ stand.Species_Group }}</td>
                    <td>{{ stand.Total_Volume_m3 }}</td>
                    <td>{{ stand.Total_Production }}</td>
                    <td>{{ stand.Total_Damage_Stem }}</td>
                    <td>{{ stand.Total_Diameter_after_30_years }}</td>
                    <td>{{ stand.Total_Production_after_30_years }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Plotly graph -->
    <div id="graph"></div>

    <!-- Load Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        var x_values = {{ x_values|tojson }};
        var initial_production_values = {{ initial_production_values|tojson }};
        var initial_volume_values = {{ initial_volume_values|tojson }};
        var thirty_years_production_values = {{ thirty_years_production_values|tojson }};
        var thirty_years_diameter_values = {{ thirty_years_diameter_values|tojson }};

        // Define colors for each dataset
        var initial_production_color = 'rgb(31, 119, 180)';
        var initial_volume_color = 'rgb(255, 127, 14)';
        var thirty_years_production_color = 'rgb(44, 160, 44)';
        var thirty_years_diameter_color = 'rgb(148, 103, 189)';

        // Define traces for each dataset
        var traces = [
            {
                x: x_values,
                y: initial_production_values,
                name: 'Initial Production',
                type: 'bar',
                marker: { color: initial_production_color }
            },
            {
                x: x_values,
                y: initial_volume_values,
                name: 'Initial Volume',
                type: 'bar',
                marker: { color: initial_volume_color }
            },
            {
                x: x_values,
                y: thirty_years_production_values,
                name: '30 Years Production',
                type: 'bar',
                marker: { color: thirty_years_production_color }
            },
            {
                x: x_values,
                y: thirty_years_diameter_values,
                name: '30 Years Diameter',
                type: 'bar',
                marker: { color: thirty_years_diameter_color }
            }
        ];

        // Define layout for the graph
        var layout = {
            title: 'Stand Table 30',
            xaxis: { title: 'Species Group' },
            yaxis: { title: 'Value' }
        };

        // Plot the graph
        Plotly.newPlot('graph', traces, layout);
    </script>
</div>
{% endblock %}
